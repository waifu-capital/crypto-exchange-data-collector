# Crypto Exchange Data Collector Configuration
# AWS credentials must be set via environment variables:
#   AWS_ACCESS_KEY - AWS access key ID
#   AWS_SECRET_KEY - AWS secret access key

[collector]
# Data feeds to collect: "orderbook", "trades"
feeds = ["orderbook", "trades"]
# How often to flush batched data to SQLite (seconds)
batch_interval_secs = 5
# How often to archive to S3 (seconds, 1 hour = 3600)
archive_interval_secs = 60
# Prometheus metrics HTTP port
metrics_port = 9090
# How many days to keep log files
log_retention_days = 1

[aws]
region = "us-west-2"
bucket = "crypto-exchange-data-collector"
# Optional: identifier for this server (appears in S3 path)
# home_server_name = "prod-1"

[database]
# SQLite database path (relative to working directory)
path = "data/collector.db"

[archive]
# Local directory for temporary Parquet files before S3 upload
dir = "data/archive"

[websocket]
# Timeout before considering a connection stale and reconnecting (seconds)
message_timeout_secs = 30
# Initial delay before retrying a failed connection (seconds)
initial_retry_delay_secs = 1
# Maximum delay between retry attempts with exponential backoff (seconds)
max_retry_delay_secs = 60

# Market pairs to collect data from
# Each [[markets]] section specifies an exchange and its symbols

[[markets]]
exchange = "binance"
symbols = ["btcusdt", "ethusdt", "solusdt"]

# [[markets]]
# exchange = "coinbase"
# symbols = ["BTC-USD", "ETH-USD"]

# [[markets]]
# exchange = "bybit"
# symbols = ["BTCUSDT"]
